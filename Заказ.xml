<?xml version="1.0" encoding="utf-8"?>

<unit name="Заказ">
	
	<type name="Заказ" title="Заказ" scope="global">
		<field.date name="Дата" width="9" indexing="sort"/>
		<field.array name="Строки" type="Строка"/>
		
		<function name="title">
		</function>

		<state name="constructor">
			<function name="Дата">
				<today/>
			</function>
		</state>
		
		<index name="Заказ">
			<key field="Дата"/>
		</index>
	</type>

	<type name="Строка">
		<field.ref name="Номенклатура" type="Номенклатура" title="Номенклатура"/>
		<field.number name="Количество" title="Количество"/>
	</type>

	<form name="Заказ">
		<column width="2"/>
		<column width="50"/>
		<column width="12"/>

		<row/>
		<row indent="1" cols="2">
			<button name="Записать" text="Записать и закрыть"/>
		</row>
		
		<row/>
		<row indent="1" text="Дата"/>
		<cell bind="Дата"/>

		<bar/>
		<bar bind="Строки" indent="1" cols="6">
			<button name="Строки.add" text="Добавить"/>
			<label text=" "/>
			<button name="Строки.remove" text="Удалить"/>
			<label text=" "/>
		</bar>
		<bar/>
		
		<row/>
		<cell text="Номенклатура" align="center" border="1" color="009646"/>
		<cell text="Количество" align="center" border="1" color="009646"/>
		<nest field="Строки"/>
	</form>

	<form name="Заказ-Строка">
		<!--<line/>-->
		<row/>
		<cell bind="Номенклатура" border="1">
			<edit type="ref" grow="1"/>
			<tool type="choosing"/>
		</cell>
		<cell bind="Количество" border="1">
			<edit grow="1"/>
			<tool type="calculator"/>
		</cell>
	</form>
</unit>
